{"ast":null,"code":"var _jsxFileName = \"/Users/ben/software/vega-web-master/src/auth/UserProvider.js\",\n    _s = $RefreshSig$();\n\nimport React, { createContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UserContext = /*#__PURE__*/createContext({\n  user: '',\n  setUserInfo: () => {},\n  logout: () => {}\n});\n\nconst UserProvider = ({\n  children\n}) => {\n  _s();\n\n  // User is the name of the \"data\" that gets stored in context\n  const [user, setUser] = useState({\n    username: '',\n    jwt: '',\n    role: ''\n  });\n  useEffect(() => {\n    const username = window.localStorage.getItem(\"username\");\n    const jwt = window.localStorage.getItem(\"jwt\");\n    const role = window.localStorage.getItem(\"role\");\n\n    if (username && jwt) {\n      setUser({\n        username: username,\n        jwt: jwt,\n        role: role\n      });\n    }\n  }, []); // Login updates the user data with a name parameter\n\n  const setUserInfo = (name, jwt, role) => {\n    console.log(\"SetUserInfo called\");\n    setUser(user => ({\n      username: name,\n      jwt: jwt,\n      role: role\n    }));\n    console.log(user);\n    window.localStorage.setItem(\"username\", name);\n    window.localStorage.setItem(\"jwt\", jwt);\n    window.localStorage.setItem(\"role\", role);\n  }; // Get Logged in User info\n\n\n  const getUserInfo = () => {\n    return window.localStorage.getItem(\"jwt\");\n  }; // Logout updates the user data to default\n\n\n  const logout = () => {\n    setUser(user => ({\n      username: '',\n      jwt: '',\n      role: ''\n    }));\n    window.localStorage.setItem(\"username\", \"\");\n    window.localStorage.setItem(\"jwt\", \"\");\n    window.localStorage.setItem(\"role\", \"\");\n  };\n\n  console.log(\"Rendering context provider\");\n  return /*#__PURE__*/_jsxDEV(UserContext.Provider, {\n    value: {\n      user,\n      setUserInfo,\n      logout\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 6\n  }, this);\n};\n\n_s(UserProvider, \"iaw1Dhl3NoTOc1HxX5rR0FRexYo=\");\n\n_c = UserProvider;\nexport { UserProvider, UserContext };\n\nvar _c;\n\n$RefreshReg$(_c, \"UserProvider\");","map":{"version":3,"sources":["/Users/ben/software/vega-web-master/src/auth/UserProvider.js"],"names":["React","createContext","useState","useEffect","UserContext","user","setUserInfo","logout","UserProvider","children","setUser","username","jwt","role","window","localStorage","getItem","name","console","log","setItem","getUserInfo"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nconst UserContext = createContext({\n  user :'',\n  setUserInfo: () => {},\n  logout: () => {}\n});\n\nconst UserProvider = ({children}) => {\n\t// User is the name of the \"data\" that gets stored in context\n  \tconst [user, setUser] = useState({ username: '', jwt:'' , role: ''});\n\n  \tuseEffect(() => {\n      const username =  window.localStorage.getItem(\"username\");\n      const jwt =  window.localStorage.getItem(\"jwt\");\n      const role =  window.localStorage.getItem(\"role\");\n      if(username && jwt){\n        setUser({\n          username: username,\n          jwt: jwt,\n          role: role\n        })\n      }\n    }, [])\n\n    // Login updates the user data with a name parameter\n  \tconst setUserInfo = (name, jwt, role) => {\n    \tconsole.log(\"SetUserInfo called\");\n      setUser((user) => ({\n      \t\tusername: name,\n      \t\tjwt: jwt,\n          role: role\n    \t}));\n      console.log(user)\n      window.localStorage.setItem(\"username\", name);\n      window.localStorage.setItem(\"jwt\", jwt);\n      window.localStorage.setItem(\"role\", role);\n  \t};\n    // Get Logged in User info\n    const getUserInfo = () => {\n      return window.localStorage.getItem(\"jwt\");\n    }\n\n  \t// Logout updates the user data to default\n  \tconst logout = () => {\n    \tsetUser((user) => ({\n      \t\tusername: '',\n      \t\tjwt: '',\n          role: ''\n    \t}));\n      window.localStorage.setItem(\"username\", \"\");\n      window.localStorage.setItem(\"jwt\",\"\");\n      window.localStorage.setItem(\"role\",\"\");\n  \t};\n    console.log(\"Rendering context provider\");\n\treturn (\n\n    \t<UserContext.Provider value={{ user, setUserInfo, logout }}>\n      \t\t{children}\n    \t</UserContext.Provider>\n  \t);\n}\n\nexport {\n  UserProvider, \n  UserContext\n}"]},"metadata":{},"sourceType":"module"}