{"ast":null,"code":"var _jsxFileName = \"/Users/ben/software/vega-web-master/src/components/pages/Resources.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useContext, useEffect } from 'react';\nimport SimplePageLayout from '../templates/SimplePageLayout.js';\nimport { Form, Button, Row, Col } from 'react-bootstrap';\nimport { fileUploader, fetchFiles, fetchData } from '../../service/FileUpload/FileUploader.js';\nimport { UserContext } from '../../auth/UserProvider.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Resources = props => {\n  _s();\n\n  const [selectedFile, setSelectedFile] = useState();\n  const [isFilePicked, setIsFilePicked] = useState(false);\n  const {\n    user\n  } = useContext(UserContext);\n  const [listOfFiles, setFiles] = useState([]);\n  const [dataLoaded, setDataLoaded] = useState(false);\n  const [content, setContent] = useState('');\n  var uploadHTML;\n  useEffect(() => {\n    console.log(\"JWT is\", user.jwt, dataLoaded);\n    console.log(\"Inside useEffect\");\n    fetchFiles(user.jwt).then(resp => {\n      setDataLoaded(true);\n      setFiles(resp);\n    });\n  }, [user]);\n\n  const changeHandler = event => {\n    setSelectedFile(event.target.files[0]);\n    setIsFilePicked(true);\n  };\n\n  const handleSubmission = () => {\n    const formData = new FormData();\n    formData.append(\"file\", selectedFile);\n    fileUploader(formData, user.jwt).then(res => {\n      console.log(\"Response\", res);\n    });\n  };\n\n  const fetchFileData = name => {\n    console.log(user.jwt);\n    fetchData(name, user.jwt).then(res => {\n      setContent(res);\n    });\n  };\n\n  const listOfFilesHTML = () => {\n    if (listOfFiles.length) {\n      return listOfFiles.map(file => /*#__PURE__*/_jsxDEV(\"li\", {\n        onClick: () => fetchFileData(file),\n        style: {\n          \"cursor\": \"pointer\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#\",\n          children: file\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 106\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 37\n      }, this));\n    }\n  };\n\n  if (user.role == \"ROLE_ADMIN\") {\n    uploadHTML = /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        className: \"mx-auto\",\n        xs: 6,\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          controlId: \"formFile\",\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n            children: \"Resources Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(Form.Control, {\n            type: \"file\",\n            onChange: changeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 10\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          type: \"submit\",\n          onClick: handleSubmission,\n          children: \"Submit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(SimplePageLayout, {\n    children: [uploadHTML, /*#__PURE__*/_jsxDEV(Row, {\n      mt: \"5\",\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        sm: 6,\n        children: /*#__PURE__*/_jsxDEV(\"ul\", {\n          style: {\n            \"list-style-type\": \"none\"\n          },\n          children: listOfFilesHTML()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        children: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 72,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Resources, \"5lG6BSAbh9d6ES8GwfoggMqcB84=\");\n\n_c = Resources;\nexport default Resources;\n\nvar _c;\n\n$RefreshReg$(_c, \"Resources\");","map":{"version":3,"sources":["/Users/ben/software/vega-web-master/src/components/pages/Resources.js"],"names":["useState","useContext","useEffect","SimplePageLayout","Form","Button","Row","Col","fileUploader","fetchFiles","fetchData","UserContext","Resources","props","selectedFile","setSelectedFile","isFilePicked","setIsFilePicked","user","listOfFiles","setFiles","dataLoaded","setDataLoaded","content","setContent","uploadHTML","console","log","jwt","then","resp","changeHandler","event","target","files","handleSubmission","formData","FormData","append","res","fetchFileData","name","listOfFilesHTML","length","map","file","role"],"mappings":"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","sourcesContent":["import {useState, useContext, useEffect} from 'react';\nimport SimplePageLayout from '../templates/SimplePageLayout.js';\nimport {Form, Button, Row, Col} from 'react-bootstrap';\nimport {fileUploader, fetchFiles, fetchData} from '../../service/FileUpload/FileUploader.js';\nimport {UserContext} from '../../auth/UserProvider.js';\n\nconst Resources = (props) => {\t\n\t\n\tconst [selectedFile, setSelectedFile] = useState();\n\tconst [isFilePicked, setIsFilePicked] = useState(false);\n\tconst {user} = useContext(UserContext);\n\tconst [listOfFiles, setFiles] = useState([]);\n\tconst [dataLoaded, setDataLoaded] = useState(false);\n\tconst [content, setContent] = useState('');\n\tvar uploadHTML;\n\tuseEffect(() => {\n\t\tconsole.log(\"JWT is\",user.jwt, dataLoaded)\n\t\t\tconsole.log(\"Inside useEffect\")\n\t\t\tfetchFiles(user.jwt)\n\t\t\t\t.then(resp => {\n\t\t\t\t\tsetDataLoaded(true);\n\t\t\t\t\tsetFiles(resp)});\n\t\t\n\n\t}, [user])\n\n\tconst changeHandler = (event) => {\n\t\tsetSelectedFile(event.target.files[0]);\n\t\tsetIsFilePicked(true);\n\t};\n\n\tconst handleSubmission = () => {\n\t\tconst formData = new FormData();\n\t\tformData.append(\"file\", selectedFile);\n\t\tfileUploader(formData, user.jwt)\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(\"Response\", res);\n\t\t\t})\n\n\t}\n\n\tconst fetchFileData = (name) => {\n\t\tconsole.log(user.jwt)\n\t\tfetchData(name,user.jwt)\n\t\t\t.then(res => {\n\t\t\t\tsetContent(res);\n\t\t\t})\n\t}\n\n\tconst listOfFilesHTML = () => {\n\t\tif(listOfFiles.length){\n\t\t\treturn listOfFiles.map((file) => <li onClick={() => fetchFileData(file)} style={{\"cursor\":\"pointer\"}}><a href=\"#\">{file}</a></li>)\n\t\t}\n\n\t}\n\n\tif (user.role == \"ROLE_ADMIN\"){\n\t\tuploadHTML = (<Row>\n\t\t\t\t<Col className=\"mx-auto\" xs={6}>\n\t\t\t\t\t<Form.Group controlId=\"formFile\" className=\"mb-3\">\n    \t\t\t\t\t<Form.Label>Resources Upload</Form.Label>\n    \t\t\t\t\t<Form.Control type=\"file\" onChange={changeHandler} />\n \t\t\t\t\t</Form.Group>\n \t\t\t\t\t<Button variant=\"primary\" type=\"submit\" onClick={handleSubmission}>\n    \t\t\t\t\tSubmit\n  \t\t\t\t\t</Button>\n \t\t\t\t</Col>\n\t\t\t</Row>);\n\t}\n\n\treturn (\n\t\t<SimplePageLayout>\n\t\t\t\n\t\t\t{uploadHTML}\n\t\t\t<Row mt=\"5\">\n\t\t\t\t<Col sm={6}>\n\t\t\t\t\t<ul style={{\"list-style-type\":\"none\"}}>{listOfFilesHTML()}</ul>\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t\t<Row>\n\t\t\t\t<Col>\n\t\t\t\t\t{content}\n\t\t\t\t</Col>\n\t\t\t</Row>\n\t\t</SimplePageLayout>\n\t\t);\n}\n\nexport default Resources;"]},"metadata":{},"sourceType":"module"}